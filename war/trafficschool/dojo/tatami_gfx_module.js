/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;var _2={};m._degToRad=function(_3){return _2[_3]||(_2[_3]=(Math.PI*_3/180));};m._radToDeg=function(_4){return _4/Math.PI*180;};m.Matrix2D=function(_5){if(_5){if(typeof _5=="number"){this.xx=this.yy=_5;}else{if(_5 instanceof Array){if(_5.length>0){var _6=m.normalize(_5[0]);for(var i=1;i<_5.length;++i){var l=_6,r=dojox.gfx.matrix.normalize(_5[i]);_6=new m.Matrix2D();_6.xx=l.xx*r.xx+l.xy*r.yx;_6.xy=l.xx*r.xy+l.xy*r.yy;_6.yx=l.yx*r.xx+l.yy*r.yx;_6.yy=l.yx*r.xy+l.yy*r.yy;_6.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_6.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_6);}}else{dojo.mixin(this,_5);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_e){var c=Math.cos(_e);var s=Math.sin(_e);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_11){return m.rotate(m._degToRad(_11));},skewX:function(_12){return new m.Matrix2D({xy:Math.tan(_12)});},skewXg:function(_13){return m.skewX(m._degToRad(_13));},skewY:function(_14){return new m.Matrix2D({yx:Math.tan(_14)});},skewYg:function(_15){return m.skewY(m._degToRad(_15));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_22){return (_22 instanceof m.Matrix2D)?_22:new m.Matrix2D(_22);},clone:function(_23){var obj=new m.Matrix2D();for(var i in _23){if(typeof (_23[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_23[i]){obj[i]=_23[i];}}return obj;},invert:function(_26){var M=m.normalize(_26),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_29,x,y){return {x:_29.xx*x+_29.xy*y+_29.dx,y:_29.yx*x+_29.yy*y+_29.dy};},multiplyPoint:function(_2c,a,b){var M=m.normalize(_2c);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_30){var M=m.normalize(_30);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_35,x,y){return m.multiply(m.translate(x,y),_35,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_3c,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_3c),a,b);}return m._sandwich(m.rotate(_3c),a.x,a.y);},rotategAt:function(_3f,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_3f),a,b);}return m._sandwich(m.rotateg(_3f),a.x,a.y);},skewXAt:function(_42,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_42),a,b);}return m._sandwich(m.skewX(_42),a.x,a.y);},skewXgAt:function(_45,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_45),a,b);}return m._sandwich(m.skewXg(_45),a.x,a.y);},skewYAt:function(_48,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_48),a,b);}return m._sandwich(m.skewY(_48),a.x,a.y);},skewYgAt:function(_4b,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_4b),a,b);}return m._sandwich(m.skewYg(_4b),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(_50,_51){var cls=_50.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_51+" ")>=0;};g._addClass=function(_53,_54){var cls=_53.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_54+" ")<0){_53.setAttribute("className",cls+(cls?" ":"")+_54);}};g._removeClass=function(_56,_57){var cls=_56.getAttribute("className");if(cls){_56.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_57+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _59={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var s=div.style;s.position="absolute";s.left="-100px";s.top="0px";s.width="30px";s.height="1000em";s.border="0px";s.margin="0px";s.padding="0px";s.outline="none";s.lineHeight="1";s.overflow="hidden";dojo.body().appendChild(div);for(var p in _59){div.style.fontSize=p;_59[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _59;};var _5d=null;b._getCachedFontMeasurements=function(_5e){if(_5e||!_5d){_5d=b._getFontMeasurements();}return _5d;};var _5f=null,_60={};b._getTextBox=function(_61,_62,_63){var m,s;if(!_5f){m=_5f=dojo.doc.createElement("div");s=m.style;s.position="absolute";s.left="-10000px";s.top="0";dojo.body().appendChild(m);}else{m=_5f;s=m.style;}m.className="";s.border="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_62){for(var i in _62){if(i in _60){continue;}s[i]=_62[i];}}if(arguments.length>2&&_63){m.className=_63;}m.innerHTML=_61;return dojo.marginBox(m);};var _67=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_67);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _69={};return function(_6a){var t=_69[_6a];if(t){return new t();}t=_69[_6a]=function(){};t.prototype=dojox.gfx["default"+_6a];return new t();};})(),normalizeColor:function(_6c){return (_6c instanceof dojo.Color)?_6c:new dojo.Color(_6c);},normalizeParameters:function(_6d,_6e){if(_6e){var _6f={};for(var x in _6d){if(x in _6e&&!(x in _6f)){_6d[x]=_6e[x];}}}return _6d;},makeParameters:function(_71,_72){if(!_72){return dojo.delegate(_71);}var _73={};for(var i in _71){if(!(i in _73)){_73[i]=dojo.clone((i in _72)?_72[i]:_71[i]);}}return _73;},formatNumber:function(x,_76){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _78=val.indexOf(".");if(_78>=0&&val.length-_78>5){val=x.toFixed(4);}}if(x<0){return val;}return _76?" "+val:val;},makeFontString:function(_79){return _79.style+" "+_79.variant+" "+_79.weight+" "+_79.size+" "+_79.family;},splitFontString:function(str){var _7b=dojox.gfx.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}_7b.style=t[0];_7b.varian=t[1];_7b.weight=t[2];var i=t[3].indexOf("/");_7b.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;break;}if(t[4].substr(0,1)=="/"){j=5;break;}}if(j+3>t.length){break;}_7b.size=t[j];_7b.family=t[j+1];}while(false);return _7b;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _82=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_82;case "in":return val*72*_82;case "pc":return val*12*_82;case "mm":return val*dojox.gfx.mm_in_pt*_82;case "cm":return val*dojox.gfx.cm_in_pt*_82;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;}});}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,_88,_89;if(!gfx.renderer){var _8a=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,silverlight,canvas").split(",");var ua=navigator.userAgent,_8c=0,_8d=0;if(dojo.isSafari>=3){if(ua.indexOf("iPhone")>=0||ua.indexOf("iPod")>=0){_89=ua.match(/Version\/(\d(\.\d)?(\.\d)?)\sMobile\/([^\s]*)\s?/);if(_89){_8c=parseInt(_89[4].substr(0,3),16);}}}if(dojo.isWebKit){if(!_8c){_89=ua.match(/Android\s+(\d+\.\d+)/);if(_89){_8d=parseFloat(_89[1]);}}}for(var i=0;i<_8a.length;++i){switch(_8a[i]){case "svg":if(!dojo.isIE&&(!_8c||_8c>=1521)&&!_8d&&!dojo.isAIR){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){_88=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_88=true;}}}catch(e){_88=false;}finally{sl=null;}if(_88){dojox.gfx.renderer="silverlight";}break;case "canvas":if(!dojo.isIE){dojox.gfx.renderer="canvas";}break;}if(dojox.gfx.renderer){break;}}if(dojo.config.isDebug){}}});dojo.requireIf(dojox.gfx.renderer=="svg","dojox.gfx.svg");dojo.requireIf(dojox.gfx.renderer=="vml","dojox.gfx.vml");dojo.requireIf(dojox.gfx.renderer=="silverlight","dojox.gfx.silverlight");dojo.requireIf(dojox.gfx.renderer=="canvas","dojox.gfx.canvas");}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=dojox.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_93){this.shape=dojox.gfx.makeParameters(this.shape,_93);this.bbox=null;return this;},setFill:function(_94){if(!_94){this.fillStyle=null;return this;}var f=null;if(typeof (_94)=="object"&&"type" in _94){switch(_94.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,_94);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,_94);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,_94);break;}}else{f=dojox.gfx.normalizeColor(_94);}this.fillStyle=f;return this;},setStroke:function(_96){if(!_96){this.strokeStyle=null;return this;}if(typeof _96=="string"||dojo.isArray(_96)||_96 instanceof dojo.Color){_96={color:_96};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_96);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_98){this.matrix=dojox.gfx.matrix.clone(_98?dojox.gfx.matrix.normalize(_98):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_9b){return _9b?this.setTransform([this.matrix,_9b]):this;},applyLeftTransform:function(_9c){return _9c?this.setTransform([_9c,this.matrix]):this;},applyTransform:function(_9d){return _9d?this.setTransform([this.matrix,_9d]):this;},removeShape:function(_9e){if(this.parent){this.parent.remove(this,_9e);}return this;},_setParent:function(_9f,_a0){this.parent=_9f;return this._updateParentMatrix(_a0);},_updateParentMatrix:function(_a1){this.parentMatrix=_a1?dojox.gfx.matrix.clone(_a1):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(_a4,_a5,_a6){return arguments.length>2?dojo.connect(this.getEventSource(),_a4,_a5,_a6):dojo.connect(this.getEventSource(),_a4,_a5);},disconnect:function(_a7){dojo.disconnect(_a7);}};dojo.extend(dojox.gfx.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},add:function(_a8){var _a9=_a8.getParent();if(_a9){_a9.remove(_a8,true);}this.children.push(_a8);return _a8._setParent(this,this._getRealMatrix());},remove:function(_aa,_ab){for(var i=0;i<this.children.length;++i){if(this.children[i]==_aa){if(_ab){}else{_aa.parent=null;_aa.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_ad){for(var i=0;i<this.children.length;++i){if(this.children[i]==_ad){this.children.splice(i,1);this.children.push(_ad);break;}}return this;},_moveChildToBack:function(_af){for(var i=0;i<this.children.length;++i){if(this.children[i]==_af){this.children.splice(i,1);this.children.unshift(_af);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo.destroy);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_b1){},whenLoaded:function(_b2,_b3){var f=dojo.hitch(_b2,_b3);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_b6){dojo.disconnect(h);f(_b6);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.Shape,{constructor:function(_b7){this.shape=dojox.gfx.getDefault("Rect");this.rawNode=_b7;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.Shape,{constructor:function(_b8){this.shape=dojox.gfx.getDefault("Ellipse");this.rawNode=_b8;},getBoundingBox:function(){if(!this.bbox){var _b9=this.shape;this.bbox={x:_b9.cx-_b9.rx,y:_b9.cy-_b9.ry,width:2*_b9.rx,height:2*_b9.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.Shape,{constructor:function(_ba){this.shape=dojox.gfx.getDefault("Circle");this.rawNode=_ba;},getBoundingBox:function(){if(!this.bbox){var _bb=this.shape;this.bbox={x:_bb.cx-_bb.r,y:_bb.cy-_bb.r,width:2*_bb.r,height:2*_bb.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.Shape,{constructor:function(_bc){this.shape=dojox.gfx.getDefault("Line");this.rawNode=_bc;},getBoundingBox:function(){if(!this.bbox){var _bd=this.shape;this.bbox={x:Math.min(_bd.x1,_bd.x2),y:Math.min(_bd.y1,_bd.y2),width:Math.abs(_bd.x2-_bd.x1),height:Math.abs(_bd.y2-_bd.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.Shape,{constructor:function(_be){this.shape=dojox.gfx.getDefault("Polyline");this.rawNode=_be;},setShape:function(_bf,_c0){if(_bf&&_bf instanceof Array){dojox.gfx.Shape.prototype.setShape.call(this,{points:_bf});if(_c0&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{dojox.gfx.Shape.prototype.setShape.call(this,_bf);}return this;},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _c4={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_c4.l>t.x){_c4.l=t.x;}if(_c4.r<t.x){_c4.r=t.x;}if(_c4.t>t.y){_c4.t=t.y;}if(_c4.b<t.y){_c4.b=t.y;}}this.bbox={x:_c4.l,y:_c4.t,width:_c4.r-_c4.l,height:_c4.b-_c4.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.Shape,{constructor:function(_c6){this.shape=dojox.gfx.getDefault("Image");this.rawNode=_c6;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.Shape,{constructor:function(_c7){this.fontStyle=null;this.shape=dojox.gfx.getDefault("Text");this.rawNode=_c7;},getFont:function(){return this.fontStyle;},setFont:function(_c8){this.fontStyle=typeof _c8=="string"?dojox.gfx.splitFontString(_c8):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_c8);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_c9){var gfx=dojox.gfx;switch(_c9.type){case gfx.defaultPath.type:return this.createPath(_c9);case gfx.defaultRect.type:return this.createRect(_c9);case gfx.defaultCircle.type:return this.createCircle(_c9);case gfx.defaultEllipse.type:return this.createEllipse(_c9);case gfx.defaultLine.type:return this.createLine(_c9);case gfx.defaultPolyline.type:return this.createPolyline(_c9);case gfx.defaultImage.type:return this.createImage(_c9);case gfx.defaultText.type:return this.createText(_c9);case gfx.defaultTextPath.type:return this.createTextPath(_c9);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(_cb){return this.createObject(dojox.gfx.Rect,_cb);},createEllipse:function(_cc){return this.createObject(dojox.gfx.Ellipse,_cc);},createCircle:function(_cd){return this.createObject(dojox.gfx.Circle,_cd);},createLine:function(_ce){return this.createObject(dojox.gfx.Line,_ce);},createPolyline:function(_cf){return this.createObject(dojox.gfx.Polyline,_cf);},createImage:function(_d0){return this.createObject(dojox.gfx.Image,_d0);},createText:function(_d1){return this.createObject(dojox.gfx.Text,_d1);},createPath:function(_d2){return this.createObject(dojox.gfx.Path,_d2);},createTextPath:function(_d3){return this.createObject(dojox.gfx.TextPath,{}).setText(_d3);},createObject:function(_d4,_d5){return null;}};}if(!dojo._hasResource["dojox.gfx.path"]){dojo._hasResource["dojox.gfx.path"]=true;dojo.provide("dojox.gfx.path");dojo.declare("dojox.gfx.path.Path",dojox.gfx.Shape,{constructor:function(_d6){this.shape=dojo.clone(dojox.gfx.defaultPath);this.segments=[];this.absolute=true;this.last={};this.rawNode=_d6;},setAbsoluteMode:function(_d7){this.absolute=typeof _d7=="string"?(_d7=="absolute"):_d7;return this;},getAbsoluteMode:function(){return this.absolute;},getBoundingBox:function(){return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},getLastPosition:function(){return "x" in this.last?this.last:null;},_updateBBox:function(x,y){if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_da){var n=_da.args,l=n.length;switch(_da.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(var i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(var i=0;i<l;++i){this._updateBBox(n[i],this.last.y);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(var i=0;i<l;++i){this._updateBBox(this.last.x,n[i]);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _de=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1]);_de=2;}for(var i=_de;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "l":case "t":for(var i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "h":for(var i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y);}this.absolute=false;break;case "v":for(var i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i]);}this.absolute=false;break;case "c":for(var i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3]);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5]);}this.absolute=false;break;case "s":case "q":for(var i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3]);}this.absolute=false;break;case "A":for(var i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(var i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6]);}this.absolute=false;break;}var _df=[_da.action];for(var i=0;i<l;++i){_df.push(dojox.gfx.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=_df.join("");}else{Array.prototype.push.apply(this.shape.path,_df);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_e0,_e1){var _e2=this._validSegments[_e0.toLowerCase()];if(typeof _e2=="number"){if(_e2){if(_e1.length>=_e2){var _e3={action:_e0,args:_e1.slice(0,_e1.length-_e1.length%_e2)};this.segments.push(_e3);this._updateWithSegment(_e3);}}else{var _e3={action:_e0,args:[]};this.segments.push(_e3);this._updateWithSegment(_e3);}}},_collectArgs:function(_e4,_e5){for(var i=0;i<_e5.length;++i){var t=_e5[i];if(typeof t=="boolean"){_e4.push(t?1:0);}else{if(typeof t=="number"){_e4.push(t);}else{if(t instanceof Array){this._collectArgs(_e4,t);}else{if("x" in t&&"y" in t){_e4.push(t.x,t.y);}}}}}},moveTo:function(){var _e8=[];this._collectArgs(_e8,arguments);this._pushSegment(this.absolute?"M":"m",_e8);return this;},lineTo:function(){var _e9=[];this._collectArgs(_e9,arguments);this._pushSegment(this.absolute?"L":"l",_e9);return this;},hLineTo:function(){var _ea=[];this._collectArgs(_ea,arguments);this._pushSegment(this.absolute?"H":"h",_ea);return this;},vLineTo:function(){var _eb=[];this._collectArgs(_eb,arguments);this._pushSegment(this.absolute?"V":"v",_eb);return this;},curveTo:function(){var _ec=[];this._collectArgs(_ec,arguments);this._pushSegment(this.absolute?"C":"c",_ec);return this;},smoothCurveTo:function(){var _ed=[];this._collectArgs(_ed,arguments);this._pushSegment(this.absolute?"S":"s",_ed);return this;},qCurveTo:function(){var _ee=[];this._collectArgs(_ee,arguments);this._pushSegment(this.absolute?"Q":"q",_ee);return this;},qSmoothCurveTo:function(){var _ef=[];this._collectArgs(_ef,arguments);this._pushSegment(this.absolute?"T":"t",_ef);return this;},arcTo:function(){var _f0=[];this._collectArgs(_f0,arguments);this._pushSegment(this.absolute?"A":"a",_f0);return this;},closePath:function(){this._pushSegment("Z",[]);return this;},_setPath:function(_f1){var p=dojo.isArray(_f1)?_f1:_f1.match(dojox.gfx.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _f3="",_f4=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_f3){this._pushSegment(_f3,_f4);}_f4=[];_f3=t;}else{_f4.push(x);}}this._pushSegment(_f3,_f4);},setShape:function(_f9){dojox.gfx.Shape.prototype.setShape.call(this,typeof _f9=="string"?{path:_f9}:_f9);var _fa=this.shape.path;this.shape.path=[];this._setPath(_fa);this.shape.path=this.shape.path.join("");return this;},_2PI:Math.PI*2});dojo.declare("dojox.gfx.path.TextPath",dojox.gfx.path.Path,{constructor:function(_fb){if(!("text" in this)){this.text=dojo.clone(dojox.gfx.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=dojo.clone(dojox.gfx.defaultFont);}},getText:function(){return this.text;},setText:function(_fc){this.text=dojox.gfx.makeParameters(this.text,typeof _fc=="string"?{text:_fc}:_fc);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_fd){this.fontStyle=typeof _fd=="string"?dojox.gfx.splitFontString(_fd):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_fd);this._setFont();return this;}});}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=dojox.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_102){this.shape=dojox.gfx.makeParameters(this.shape,_102);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,fill);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,fill);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,fill);break;}}else{f=dojox.gfx.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_105){if(!_105){this.strokeStyle=null;return this;}if(typeof _105=="string"||dojo.isArray(_105)||_105 instanceof dojo.Color){_105={color:_105};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_105);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_107){this.matrix=dojox.gfx.matrix.clone(_107?dojox.gfx.matrix.normalize(_107):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_10a){return _10a?this.setTransform([this.matrix,_10a]):this;},applyLeftTransform:function(_10b){return _10b?this.setTransform([_10b,this.matrix]):this;},applyTransform:function(_10c){return _10c?this.setTransform([this.matrix,_10c]):this;},removeShape:function(_10d){if(this.parent){this.parent.remove(this,_10d);}return this;},_setParent:function(_10e,_10f){this.parent=_10e;return this._updateParentMatrix(_10f);},_updateParentMatrix:function(_110){this.parentMatrix=_110?dojox.gfx.matrix.clone(_110):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(name,_114,_115){return arguments.length>2?dojo.connect(this.getEventSource(),name,_114,_115):dojo.connect(this.getEventSource(),name,_114);},disconnect:function(_116){dojo.disconnect(_116);}};dojo.extend(dojox.gfx.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},add:function(_117){var _118=_117.getParent();if(_118){_118.remove(_117,true);}this.children.push(_117);return _117._setParent(this,this._getRealMatrix());},remove:function(_119,_11a){for(var i=0;i<this.children.length;++i){if(this.children[i]==_119){if(_11a){}else{_119.parent=null;_119.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_11c){for(var i=0;i<this.children.length;++i){if(this.children[i]==_11c){this.children.splice(i,1);this.children.push(_11c);break;}}return this;},_moveChildToBack:function(_11e){for(var i=0;i<this.children.length;++i){if(this.children[i]==_11e){this.children.splice(i,1);this.children.unshift(_11e);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo.destroy);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_120){},whenLoaded:function(_121,_122){var f=dojo.hitch(_121,_122);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_125){dojo.disconnect(h);f(_125);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.Shape,{constructor:function(_126){this.shape=dojox.gfx.getDefault("Rect");this.rawNode=_126;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.Shape,{constructor:function(_127){this.shape=dojox.gfx.getDefault("Ellipse");this.rawNode=_127;},getBoundingBox:function(){if(!this.bbox){var _128=this.shape;this.bbox={x:_128.cx-_128.rx,y:_128.cy-_128.ry,width:2*_128.rx,height:2*_128.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.Shape,{constructor:function(_129){this.shape=dojox.gfx.getDefault("Circle");this.rawNode=_129;},getBoundingBox:function(){if(!this.bbox){var _12a=this.shape;this.bbox={x:_12a.cx-_12a.r,y:_12a.cy-_12a.r,width:2*_12a.r,height:2*_12a.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.Shape,{constructor:function(_12b){this.shape=dojox.gfx.getDefault("Line");this.rawNode=_12b;},getBoundingBox:function(){if(!this.bbox){var _12c=this.shape;this.bbox={x:Math.min(_12c.x1,_12c.x2),y:Math.min(_12c.y1,_12c.y2),width:Math.abs(_12c.x2-_12c.x1),height:Math.abs(_12c.y2-_12c.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.Shape,{constructor:function(_12d){this.shape=dojox.gfx.getDefault("Polyline");this.rawNode=_12d;},setShape:function(_12e,_12f){if(_12e&&_12e instanceof Array){dojox.gfx.Shape.prototype.setShape.call(this,{points:_12e});if(_12f&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{dojox.gfx.Shape.prototype.setShape.call(this,_12e);}return this;},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.Shape,{constructor:function(_135){this.shape=dojox.gfx.getDefault("Image");this.rawNode=_135;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.Shape,{constructor:function(_136){this.fontStyle=null;this.shape=dojox.gfx.getDefault("Text");this.rawNode=_136;},getFont:function(){return this.fontStyle;},setFont:function(_137){this.fontStyle=typeof _137=="string"?dojox.gfx.splitFontString(_137):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_137);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_138){var gfx=dojox.gfx;switch(_138.type){case gfx.defaultPath.type:return this.createPath(_138);case gfx.defaultRect.type:return this.createRect(_138);case gfx.defaultCircle.type:return this.createCircle(_138);case gfx.defaultEllipse.type:return this.createEllipse(_138);case gfx.defaultLine.type:return this.createLine(_138);case gfx.defaultPolyline.type:return this.createPolyline(_138);case gfx.defaultImage.type:return this.createImage(_138);case gfx.defaultText.type:return this.createText(_138);case gfx.defaultTextPath.type:return this.createTextPath(_138);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(rect){return this.createObject(dojox.gfx.Rect,rect);},createEllipse:function(_13b){return this.createObject(dojox.gfx.Ellipse,_13b);},createCircle:function(_13c){return this.createObject(dojox.gfx.Circle,_13c);},createLine:function(line){return this.createObject(dojox.gfx.Line,line);},createPolyline:function(_13e){return this.createObject(dojox.gfx.Polyline,_13e);},createImage:function(_13f){return this.createObject(dojox.gfx.Image,_13f);},createText:function(text){return this.createObject(dojox.gfx.Text,text);},createPath:function(path){return this.createObject(dojox.gfx.Path,path);},createTextPath:function(text){return this.createObject(dojox.gfx.TextPath,{}).setText(text);},createObject:function(_143,_144){return null;}};}
