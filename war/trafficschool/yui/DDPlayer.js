/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


YAHOO.example.DDPlayer=function(id,_2,_3){this.initPlayer(id,_2);};YAHOO.extend(YAHOO.example.DDPlayer,YAHOO.util.DDProxy);YAHOO.example.DDPlayer.TYPE="DDPlayer";YAHOO.example.DDPlayer.prototype.initPlayer=function(id,_5,_6){if(!id){return;}this.init(id,_5,_6);this.initFrame();this.logger=this.logger||YAHOO;var s=this.getDragEl().style;s.borderColor="transparent";s.opacity=0.76;s.filter="alpha(opacity=76)";this.isTarget=false;this.originalStyles=[];this.type=YAHOO.example.DDPlayer.TYPE;this.slot=null;this.startPos=YAHOO.util.Dom.getXY(this.getEl());this.logger.log(id+" startpos: "+this.startPos);this.acceptFct=null;this.dropFct=null;};YAHOO.example.DDPlayer.prototype.startDrag=function(x,y){this.logger.log(this.id+" startDrag");var _a=this.getDragEl();var _b=this.getEl();_a.innerHTML=_b.innerHTML;_a.className=_b.className;_a.style.color=this.DDM.getStyle(_b,"color");_a.style.backgroundColor=this.DDM.getStyle(_b,"backgroundColor");var s=_b.style;s.opacity=0.1;s.filter="alpha(opacity=10)";var _d=YAHOO.util.DDM.getRelated(this,true);this.logger.log(_d.length+" targets");for(var i=0;i<_d.length;i++){var _f=this.getTargetDomRef(_d[i]);if(!this.originalStyles[_f.id]){this.originalStyles[_f.id]=_f.className;}_f.className="target";}};YAHOO.example.DDPlayer.prototype.getTargetDomRef=function(oDD){return oDD.getEl();};YAHOO.example.DDPlayer.prototype.endDrag=function(e){var s=this.getEl().style;s.opacity=1;s.filter="alpha(opacity=100)";this.resetTargets();};YAHOO.example.DDPlayer.prototype.resetTargets=function(){var _13=YAHOO.util.DDM.getRelated(this,true);for(var i=0;i<_13.length;i++){var _15=this.getTargetDomRef(_13[i]);var _16=this.originalStyles[_15.id];if(_16){_15.className=_16;}}};YAHOO.example.DDPlayer.prototype.onDragDrop=function(e,id){var oDD;if("string"==typeof id){oDD=YAHOO.util.DDM.getDDById(id);}else{oDD=YAHOO.util.DDM.getBestMatch(id);}var el=this.getEl();this.slot=oDD;if(this.acceptFct){var res=this.acceptFct(this.getEl(),this.slot.getEl());if(res==false){YAHOO.util.Dom.setXY(this.getEl(),this.startPos);this.resetTargets();return;}}YAHOO.util.DDM.moveToEl(el,oDD.getEl());this.resetTargets();if(this.dropFct){this.dropFct(this.getEl(),this.slot.getEl());}};YAHOO.example.DDPlayer.prototype.accept=function(fct){this.acceptFct=fct;};YAHOO.example.DDPlayer.prototype.subscribe=function(fct){this.dropFct=fct;};YAHOO.example.DDPlayer.prototype.swap=function(el1,el2){var dom=YAHOO.util.Dom;var _21=dom.getXY(el1);var _22=dom.getXY(el2);dom.setXY(el1,_22);dom.setXY(el2,_21);};YAHOO.example.DDPlayer.prototype.onDragOver=function(e,id){};YAHOO.example.DDPlayer.prototype.onDrag=function(e,id){};function ddplayerIsOk(){};